## Task1
### Q1
```
select CID from customer as A
where exists (select * from customer as B
where B.CID = 1 and A.City = B.City)
```
<div align=center><img src=image.png></div>

### Q2
```
select CID from customer
where not exists (select * from food as A where A.city not in (select City from food as B, orders 
where orders.FID = B.FID and customer.CID = orders.CID))

```
<div align=center><img src=image-1.png></div>

###	Q3
```
select distinct CID from orders as A
where not exists(
select B.FID from orders as B
where B.CID = 4 and B.FID not in (select C.FID from orders as C
where C.CID = A.CID))
```
<div align=center><img src=image-2.png></div>

## Task2
### Q1

```
create table Sales(
	Food_ID int primary key,
	Food_name varchar(20) not null,
	total_sales int
)
```

```
insert into Sales(Food_ID,Food_name,total_sales)
select food.FID,Name,sum(quantity) from food,orders 
where food.FID = orders.FID 
group by food.FID, food.Name 
```

### Q2
```
insert into orders values(4,2,1,3)
```
```
update sales set total_sales = (select sum(quantity) from orders
where orders.FID = sales.Food_ID group by orders.FID)
```

### Q3
```
alter table sales add grade int default 6 check(grade >= 0 and grade <= 10)
```

## Task3
### Q1
```
create view Shu-view as
select customer.CID,customer.City from orders,food,customer
where customer.CID = orders.CID and orders.FID = food.FID and food.City = '四川' or food.City = '重庆'
```

### Q2
```
select Shu-view.CID from Shu-view,food,orders
where Shu-view.CID = orders.CID and orders.FID = food.FID
group by orders.CID 
ORDER BY sum(orders.quantity * food.Price) DESC LIMIT 1;
```
<div align=center><img src=image-3.png></div>

### Q3
&ensp; &ensp;&ensp;可以成功，因为在视图创建的定义中，不满足以下条件：
* JOIN、GROUP BY等子句
* DISTINCT等修饰词
* SELECT子句中含有聚合函数
* WHERE的子查询引用了FROM句子中的表<br>

&ensp; &ensp;&ensp;因此在使用insert语句插入表项时不会导致失败。

### Q4
```
create view Male-view as
select CID,City from customer
where Gender = '男'
with check option 

```

### Q5
&ensp; &ensp;&ensp;不能成功，因为输入的数据中没有性别选项，导致违反`check option`，及性别为男的规定。
<div align=center><img src=image-4.png></div>